# Dockerfile for dbt execution
FROM python:3.11-slim

# Install dbt and popular adapters (using 1.8.x which fixes protobuf issues)
RUN pip install --no-cache-dir \
    dbt-core==1.8.7 \
    dbt-snowflake \
    dbt-bigquery \
    dbt-postgres \
    dbt-redshift \
    dbt-duckdb

# Install git for cloning repos
RUN apt-get update && \
    apt-get install -y git && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

WORKDIR /project

# Default command
CMD ["dbt", "parse"]
